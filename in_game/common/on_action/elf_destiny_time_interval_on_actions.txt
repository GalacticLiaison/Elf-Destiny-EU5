# Does actually work, would need to hide peasants in UI
monthly_country_pulse = {
	on_actions = {
		assign_aeluran_advisor
		set_calaquendi_education
		# elf_destiny_expedition_trigger
	}
}

# convert_elf_pop = {
# 	trigger = {
# 		culture = { has_culture_group = culture_group:elven_culture_group }
# 	}
# 	effect = {
# 		debug_log = "convert_elf_pop?"
# 		error_log = "convert_elf_pop!!"
# 		every_pop = {
# 			limit = {
# 				pop_type = pop_type:peasants
# 			}
# 			change_pop_type = pop_type:elves
# 		}
# 	}
# }


assign_aeluran_advisor = {
	trigger = {
		ruler ?= {
			is_any_elf_type = yes
		}
		religion = religion:aeluran
		has_estate_privilege = estate_privilege:aeluran_advisors
		NOT = {
			any_cabinet_character = {
				has_variable = aeluran_advisor
			}
		}
	}
	effect = {				
		trigger_event_non_silently = {
			id = aeluran_events.1
		}			
	}
}

set_calaquendi_education = {
	trigger = {
		has_estate_privilege = estate_privilege:calaquendi_apprenticeships
	}

	effect = {
		set_calaquendi_education_effect = yes
	}
}

# elf_destiny_expedition_trigger = {
# 	trigger = {
# 		elven_culture_trigger = yes
# 		treasury >= 200
# 		NOT = { has_country_flag = elven_expedition_active }
# 	}
# 	random_events = {
# 		5 = elf_destiny_expedition.1
# 	}
# }
# add_to_cabinet

yearly_country_pulse = {
	on_actions = {
		daughters_sent_to_become_aeluran_sisters
		daughters_return_as_aeluran_sisters
	}
}

daughters_sent_to_become_aeluran_sisters = {
	trigger = {
		religion = religion:aeluran
		any_character = {
			is_female = yes
			is_any_elf_type = yes
			character_age < 7
			# NOT = {
			# 	has_variable = refused_aeluran_training
			# }
		}
	}

	effect = {
		daughters_sent_to_become_aeluran_sisters_effect = yes
	}
}

daughters_return_as_aeluran_sisters = {
	trigger = {
		this = c:DWD
		any_character = {
			is_female = yes
			is_adult = yes
			has_variable = country_of_origin
			NOT = {
				has_trait = aeluran_sister
			}
		}
	}

	effect = {
		daughters_return_as_aeluran_sisters_effect = yes
	}
}



four_yearly_country_pulse = {
	on_actions = {
		assign_enchantress_trait
		assign_heroic_trait
	}
}

assign_enchantress_trait = {
	trigger = {
		has_religious_aspect = religious_aspect:beguiling_nature
	}

	effect = {
		assign_enchantress_trait_effect = yes
	}
}

assign_heroic_trait = {
	trigger = {
		has_religious_aspect = religious_aspect:heroic_courage
	}

	effect = {
		assign_heroic_trait_effect = yes
	}
}