#root = country, scope:character = newborn
on_character_birth = {
	on_actions = {
		assign_elf_trait
		assign_elf_bloodline_traits
		assign_genetic_traits
	}
}

assign_elf_trait = {
	trigger = {
		OR = {
			scope:character.father = {
				is_any_elf_type = yes
			}
			scope:character.mother = {
				is_any_elf_type = yes
			}
		}
	}
	effect = {
		scope:character = {
			assign_elf_racial_trait_effect = yes
		}
	}
}

assign_elf_bloodline_traits = {
	trigger = {
		OR = {
			scope:character.father = {
				has_any_elven_bloodline = yes
			}
			scope:character.mother = {
				has_any_elven_bloodline = yes
			}
		}
	}
	effect = {
		scope:character = {
			assign_bloodline_traits_at_birth_effect = yes
		}
	}
}

assign_genetic_traits = {
	effect = {
		scope:character = {
			genetic_inheritance_effect = yes
		}
	}
}

#root = country, scope:target = character who dies
on_character_death = {
	on_actions = {
		aeluran_succession
	}
}

aeluran_succession = {
	trigger = {
		scope:target = {
			OR = {
				has_trait = aeluran_matron
				has_trait = aeluran_matriarch
			}
		}
	}
	effect = {
		aeluran_succession_effect = yes
	}
}


#root = character
#only from create_character effect
on_character_created = {
	on_actions = {
		handle_created_character_race
		new_character_chance_of_random_genetic_trait
	}
}

handle_created_character_race = {
	trigger = {
		culture = { has_culture_group = culture_group:elven_culture_group}
		is_any_elf_type = no
	}
	effect = {
		handle_created_character_race_effect = yes
	}
}

new_character_chance_of_random_genetic_trait = {
	trigger = {

	}
	effect = {
		random = { # chance to be born with a genetic trait not inherited
			chance = newly_created_character_genetic_trait_chance
			use_fake_random_effect = { function_name = assign_random_genetic_trait }
		}
	}
}